<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Website</title>
    <link rel="stylesheet" href="/css/styles.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <!-- Background Blur for the Entire Website -->
    <div class="background-blur"></div>

    <!-- Navigation Section -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: rgba(0, 0, 0, 0.5);">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">JourneyCraft</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/features">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/testimonials">Testimonials</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Contact
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Phone: (123) 456-7890</a></li>
                            <li><a class="dropdown-item" href="#">Email: contact@travelwebsite.com</a></li>
                            <li><a class="dropdown-item" href="#">Address: 123 Travel St, Adventure City, World</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/budget">Budget</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Carousel Background -->
    <section id="home">
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="/Screenshot (107).png" class="d-block w-100" alt="Background 1">
                </div>
                <div class="carousel-item">
                    <img src="/Screenshot (108).png" class="d-block w-100" alt="Background 2">
                </div>
                <div class="carousel-item">
                    <img src="/Screenshot (109).png" class="d-block w-100" alt="Background 3">
                </div>
            </div>
            <!-- Previous and Next Buttons -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <div class="hero">
            <h1>Hey <%= name%>,Welcome to JourneyCraft</h1>
            <p>Plan your next adventure with us</p>
        </div>
    </section>

    <!-- Inside your index.ejs file, below the Hero Section -->
    <section id="budget-calculator" class="container mt-5">
        <h2 class="text-center mb-4">Find Hotels within Your Budget</h2>
        <form id="hotelSearchForm">
            <div class="mb-3">
                <label for="destination" class="form-label">Destination:</label>
                <input type="text" class="form-control" id="destination" name="destination" required>
            </div>
            <div class="mb-3">
                <label for="checkInDate" class="form-label">Check-in Date:</label>
                <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>
            </div>
            <div class="mb-3">
                <label for="checkOutDate" class="form-label">Check-out Date:</label>
                <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>
            </div>
            <div class="mb-3">
                <label for="minBudget" class="form-label">Minimum Budget (INR):</label>
                <input type="number" class="form-control" id="minBudget" name="minBudget" required>
            </div>
            <div class="mb-3">
                <label for="maxBudget" class="form-label">Maximum Budget (INR):</label>
                <input type="number" class="form-control" id="maxBudget" name="maxBudget" required>
            </div>
            <button type="submit" class="btn btn-primary">Search Hotels</button>
        </form>

        <!-- Results Section -->
        <div id="hotelResults" class="mt-4"></div>
    </section>

    <!-- Featured Destinations Section -->
    <section id="featured-destinations">
        <h2 class="text-center mb-4">Featured Destinations in India</h2>
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/tajmahal.jpg" alt="Taj Mahal" class="img-fluid">
                        <h3 class="mt-3">Taj Mahal</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/baga-sea-beach.jpg" alt="Baga Beach" class="img-fluid">
                        <h3 class="mt-3">Baga Beach</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/hawa mahal.png" alt="Hawa Mahal" class="img-fluid">
                        <h3 class="mt-3">Hawa Mahal</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/ajan.jpg" alt="Ajanta and Ellora Caves" class="img-fluid">
                        <h3 class="mt-3">Ajanta and Ellora Caves</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/Red_Fort_in_Delhi_03-2016_img3.jpg" alt="Red Fort" class="img-fluid">
                        <h3 class="mt-3">Red Fort</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/him.jpeg" alt="Himalayan Trekking" class="img-fluid">
                        <h3 class="mt-3">Himalayan Trekking</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/west.jpg" alt="Western Ghats Trekking" class="img-fluid">
                        <h3 class="mt-3">Western Ghats Trekking</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/Screenshot (110).png" alt="Marine Drive" class="img-fluid">
                        <h3 class="mt-3">Marine Drive</h3>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="destination">
                        <img src="/Screenshot (111).png" alt="Kerala Backwaters" class="img-fluid">
                        <h3 class="mt-3">Kerala Backwaters</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Section with Parallax Effect -->
    <footer class="text-center py-3" style="background-image: url('/images/footer-background.jpg'); background-attachment: fixed;">
        <p>&copy; 2023 Travel Website. All Rights Reserved. ChatGPT always makes mistakes. Use it if you want to get frustrated.</p>
    </footer>

    <!-- Chatbot Integration -->
    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
    <df-messenger
      chat-title="Travel_Buddy"
      agent-id="9bf2d294-0461-477e-aa70-1e626109e9b1"
      language-code="en"
    ></df-messenger>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Your Custom JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('hotelSearchForm').addEventListener('submit', function(event) {
                event.preventDefault();

                // Collect input values
                const destination = document.getElementById('destination').value;
                const checkInDate = document.getElementById('checkInDate').value;
                const checkOutDate = document.getElementById('checkOutDate').value;
                const minBudget = document.getElementById('minBudget').value;
                const maxBudget = document.getElementById('maxBudget').value;

                // Send the request to your server's API endpoint
                fetch(`/api/hotels?destination=${encodeURIComponent(destination)}&checkInDate=${encodeURIComponent(checkInDate)}&checkOutDate=${encodeURIComponent(checkOutDate)}&minBudget=${encodeURIComponent(minBudget)}&maxBudget=${encodeURIComponent(maxBudget)}`)
                    .then(response => response.json())
                    .then(data => {
                        const resultsContainer = document.getElementById('hotelResults');
                        resultsContainer.innerHTML = ''; // Clear previous results

                        // Check if hotels data exists and is not empty
                        if (data.hotels && data.hotels.length > 0) {
                            data.hotels.forEach(hotel => {
                                const hotelDiv = document.createElement('div');
                                hotelDiv.className = 'hotel-result'; // Add a class for styling
                                hotelDiv.innerHTML = `
                                    <h3>${hotel.name}</h3>
                                    <p>Price: ${hotel.price} INR per night</p>
                                    <a href="${hotel.link}" target="_blank">View Details</a>
                                `;
                                resultsContainer.appendChild(hotelDiv);
                            });
                        } else {
                            resultsContainer.innerHTML = '<p>No hotels found within the given budget.</p>';
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        const resultsContainer = document.getElementById('hotelResults');
                        resultsContainer.innerHTML = '<p>Failed to fetch hotel data. Please try again later.</p>';
                    });
            });
        });
    </script>
</body>
</html>
